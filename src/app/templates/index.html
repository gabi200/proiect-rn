<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>YOLOv9 Traffic Sign Recognition</title>
        <link
            rel="stylesheet"
            href="{{ url_for('static', filename='style.css') }}"
        />
    </head>
    <body>
        <h1>ðŸš¦ Traffic Sign Recognition System</h1>

        <div class="container">
            <div class="main-content">
                <div class="video-box">
                    <img src="{{ url_for('video_feed') }}" alt="Video Feed" />
                </div>

                <div class="controls">
                    <h2>Settings</h2>
                    <div class="control-group">
                        <label for="confSlider"
                            >Confidence Threshold:
                            <span id="confValue" class="value-display"
                                >0.50</span
                            ></label
                        >
                        <input
                            type="range"
                            id="confSlider"
                            min="0.01"
                            max="1.0"
                            step="0.01"
                            value="0.50"
                        />
                    </div>
                    <p class="desc">
                        Adjust sensitivity to reduce false positives.
                    </p>
                </div>
            </div>

            <div class="stats-box">
                <h2>Dataset Distribution Analysis</h2>
                <!-- Calls the new route that runs analysis.py -->
                <img
                    src="{{ url_for('dataset_stats_img') }}"
                    alt="Dataset Statistics"
                    class="stats-img"
                />
            </div>
        </div>

        <script>
            const slider = document.getElementById("confSlider");
            const display = document.getElementById("confValue");

            slider.oninput = function () {
                display.innerHTML = this.value;
                fetch("/update_settings", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ conf: parseFloat(this.value) }),
                });
            };
        </script>
    </body>
</html>
